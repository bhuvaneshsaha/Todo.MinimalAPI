<form class="flex flex-col w-80 mb-5" [formGroup]="registerForm">
  <div class="form-control w-full max-w-xs">
    <label class="label">
      <span class="label-text">Name</span>
    </label>
    <input
      type="text"
      formControlName="name"
      placeholder="Name"
      class="input input-bordered input-sm w-full max-w-xs"
      [ngClass]="{'input-error': isInvalidAndDirty('name')}"
    />
    <div class="text-red-500" *ngIf="isInvalidAndDirty('name')">
      <div *ngIf="registerForm.get('name')?.errors?.['required']">Name is required</div>
    </div>
  </div>

  <div class="form-control w-full max-w-xs">
    <label class="label">
      <span class="label-text">Email</span>
    </label>
    <input
      type="email"
      formControlName="email"
      placeholder="Email"
      class="input input-bordered input-sm w-full max-w-xs"
      [ngClass]="{'input-error': isInvalidAndDirty('email')} "
    />
    <div class="text-red-500" *ngIf="isInvalidAndDirty('email')">
      <div *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</div>
      <div *ngIf="registerForm.get('email')?.errors?.['email']">Email is invalid</div>
    </div>
  </div>

  <div class="form-control w-full max-w-xs">
    <label class="label">
      <span class="label-text">Mobile</span>
    </label>
    <input
      type="text"
      formControlName="mobile"
      placeholder="Mobile"
      class="input input-bordered input-sm w-full max-w-xs"
      [ngClass]="{'input-error': isInvalidAndDirty('mobile')}"
    />
    <div class="text-red-500" *ngIf="isInvalidAndDirty('mobile')">
      <div *ngIf="registerForm.get('mobile')?.errors?.['required']">Mobile is required</div>
      <div *ngIf="registerForm.get('mobile')?.errors?.['pattern']">Mobile is invalid</div>
    </div>
  </div>

  <div class="form-control w-full max-w-xs">
    <label class="label">
      <span class="label-text">Password</span>
    </label>
    <input
      type="password"
      formControlName="password"
      placeholder="Password"
      class="input input-bordered input-sm w-full max-w-xs"
      [ngClass]="{'input-error': isInvalidAndDirty('password')}"
    />
    <div class="text-red-500" *ngIf="isInvalidAndDirty('password')">
      <div  *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</div>
      <div  *ngIf="registerForm.get('password')?.errors?.['passwordMismatch']"> Password and confirm password not matched </div>
    </div>
  </div>

  <div class="form-control w-full max-w-xs">
    <label class="label">
      <span class="label-text">Confirm Password</span>
    </label>
    <input
      type="password"
      formControlName="confirmPassword"
      placeholder="Confirm Password"
      class="input input-bordered input-sm w-full max-w-xs"
      [ngClass]="{'input-error': isInvalidAndDirty('confirmPassword')}"
    />
    <div class="text-red-500" *ngIf="isInvalidAndDirty('confirmPassword')">
      <div *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Confirm Password is required</div>
      <div *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']">Confirm Password is not same</div>
    </div>
  </div>

  <div class="text-red-700 bg-red-500/10 mt-2" *ngIf="error">
    {{ error }}
  </div>
  <button type="submit" class="btn btn-primary btn-sm flex-auto mt-3" [disabled]="registerForm.invalid" (click)="registerUser()">
    <ng-container *ngIf="!registerForm.invalid; else disabledButton">
      Register
    </ng-container>
    <ng-template #disabledButton>
      Please fill out all required fields
    </ng-template>
  </button>
</form>
